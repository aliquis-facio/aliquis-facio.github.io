# Webhook

## 개요

특정 이벤트가 발생했을 때, 미리 설정된 URL로 자동으로 HTTP 요청을 보내는 기능이다.

웹훅은 유저가 어떤 이벤트를 발생했을 때 API 호출을 한다.

## 동작 방식

1. 이벤트 설정: 웹훅을 설정할 때, 특정 이벤트(예: 회원가입 등)를 트리거로 지정한다.
2. URL 지정: 이벤트가 발생했을 때 데이터를 보낼 URL을 설정한다. 이 URL은 데이터를 수신할 서버의 엔드포인트이다.
3. HTTP 요청 전송: 설정된 이벤트가 발생하면, 웹훅은 자동으로 지정된 URL로 HTTP API 요청을 전송한다.
4. 서버에서 처리: 수신 서버는 이 HTTP 요청을 받아서 필요한 처리를 수행한다.

## 장점

* 실시간 데이터 전송: 웹훅은 이벤트 발생 시 즉시 데이터를 전송하므로 실시간으로 데이터 처리가 가능하다.
* 단순성과 유연성: 웹훅으로 비교적 간단하게 다른 시스템과 쉽게 통합할 수 있다. 이를 통해 복잡한 통신 방식을 구현하지 않고도 애플리케이션 간의 실시간 데이터 연동을 구현할 수 있다.
![[20250823190013.png]]

## Polling VS Webhook

![[20250823185105.png]]

Polling
* 클라이언트가 서버 API를 호출해서 이벤트가 발생했는지 확인해야 함. 
* 이벤트 발생 전까지 클라이언트가 주기적으로 API를 호출해야 함.
* 실시간으로 이벤트 데이터를 받기 어려움.

Webhook
* 한 번 설정하면 추가 요청을 보내지 않아도 됨.
* 이벤트가 발생한 즉시 데이터를 받을 수 있음.

## 웹훅 설정 방법

### 웹훅 수신 서버 설정

웹훅을 사용하려면 먼저 웹훅 요청을 수신할 서버가 필요하다. 이 서버는 웹훅 요청을 받아 처리할 수 있어야 한다.

#### 단계별 설정 방법:
1. 서버 준비: 웹훅 요청을 받을 서버를 준비한다. 이 서버는 클라우드 서버나 내부 서버일 수 있다.
2. 엔드포인트 생성: 개발자는 웹훅 요청을 받을 URL 경로를 설정한다. 예를 들어, https://api.example.com/blabla와 같은 URL을 사용할 수 있다.
3. 응답 구성: 웹훅 요청을 받으면 서버는 요청을 처리하고 응답을 반환해야 한다. 이는 웹훅이 성공적으로 수신되었는지 확인하기 위함이다.

### HTTP 설정 및 예시

#### 단계별 설정 방법:

1. HTTP 메서드 선택: 일반적으로 웹훅 요청은 POST 메서드를 사용한다. 이는 서버에 데이터를 전송하기 위한 방법이다.
2. HTTP 헤더 설정: 요청 헤더에는 인증 정보나 데이터 형식을 지정하는 정보가 포함된다. 예를 들어, Content-Type을 application/json으로 설정해 데이터 형식을 지정한다.
3. HTTP 본문 구성: 요청 본문에는 이벤트와 관련된 데이터가 포함된다. 예를 들어, 회원 가입 이벤트의 경우, 유저 ID, 이름, 이메일 등의 정보를 포함할 수 있다.

# 참고

* [웹훅(Webhook)](https://docs.tosspayments.com/resources/glossary/webhook)
* [웹훅(Webhook)의 개념과 활용 예시: 쿠폰 발급, 게임 레벨업, 마케팅자동화 쉽게 만드세요!](https://blog.notifly.tech/webhook-definition-examples/)
* [웹훅[Webhook]이란 무엇일까?](https://frtt0608.tistory.com/143)
* [웹훅](https://ko.wikipedia.org/wiki/%EC%9B%B9%ED%9B%85)
* [Webhook 을 통해 알림을 구현해보자!](https://velog.io/@weskii/Webhook-%EC%9D%84-%ED%86%B5%ED%95%B4-%EC%95%8C%EB%A6%BC%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EC%9E%90)