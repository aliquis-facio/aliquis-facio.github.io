# Blueprint

![](TechStack.png)
[Tech Stack](https://www.canva.com/design/DAGu65GIRDg/wmVz6DxOi5hmIStaFj-gfA/edit)

---

## 0. 작업 우선순위
1. **기반 인프라 (최우선)**
	- [x]  **MySQL / InfluxDB 구축**
	- [ ]  ~~**MQTT 브로커 구축 (Mosquitto + mTLS)**~~
	- [x]  **라즈베리파이 환경 구축**
	- [x] **Home Assistant Core 설치**
2. **핵심 연동**
	- [x]  **LG ThinQ API 연동**
	- [x]  **SSO/Auth 연동**
3. **보안 및 안정화**
	- [ ]  ~~**VLAN 분리 및 방화벽 규칙 적용**~~
	- [ ]  **DB 보안 강화**
4. **AI 모듈**
	-  **음성 인터페이스 허브**
	-  **낙상 감지 모델**
5. **자동화 및 UX**
	- [ ]  ~~**Node-RED & YAML 자동화**~~
	- [ ]  **Grafana 보호자 대시보드**
	- [ ]  **UX/UI 고도화**
6. **확장**
	-  UPS 무정전 장치 → 안정성 보강
	-  시설/재택 케어 적용 검토
	-  외부 연동 서비스 (예: 요양원 관리 패널, SMS 알림 등)

---

## 1. 통신

- [ ]  ~~**1. [MQTT 브로커**](obsidian://open?vault=memo&file=temp%2FMosquittoMQTTBroker)~~
	- [x]  ~~설치/기본설정: 라즈베리파이에 설치. 1883(내부), 8883(TLS) 포트 확인~~
	- [x]  ~~TLS 1.3 적용~~
	- [ ]  ~~mTLS 적용~~
		- [x] ~~인증서 발급~~
		- [x] ~~Mosquitto Add-on 설정~~
		- [ ] ~~클라이언트 설정~~
	- [ ]  ~~[토픽 설계](obsidian://open?vault=memo&file=temp%2FInfluxDB%20%ED%86%A0%ED%94%BD): `care/+/+/state`, `care/+/+/cmd`, `ha/+/event`~~
		- [ ] ~~HA MQTT 통합~~
		- [ ] ~~HQ InfluxDB 통합 설정~~
		- [ ] ~~Downsampling~~
		- [ ] ~~성능 관측 최소화~~
	- [ ]  ~~Influx 파이프라인: MQTT → InfluxDB~~
	- [ ]  ~~부하/품질 측정: QoS(0/1/2)별 TPS, 지연, 드롭률 기록~~
- [x] **2. LG ThinQ (HA 통합 구성요소 사용)**
	- [ ]  통합 설치/로그인 완료 확인 (HA UI → 통합 구성요소)
	- [ ]  비밀정보 분리: `secrets.yaml`에 LG 계정/토큰류 저장(애드온이 참조하는 경우 그대로 유지)
	- [ ]  스캔 주기 최적화
	    - 옵션에 `scan_interval`/`polling` 유사 설정이 있으면 30–60s 범위에서 조정
	    - 상태 캐시가 있는 엔티티는 과도한 업데이트 억제
	- [ ]  Rate Limit/실패 대응
	    - 통합의 DataUpdateCoordinator 기본 정책 활용
	    - 일시 실패 시 캐시 사용, 재시도 백오프 확인
	    - 불필요 센서는 `ignore`/`disabled` 처리로 호출 수 절감
	- [ ]  제어 안전장치
	    - 씽큐 제어 서비스 호출 전후 HA `condition`(전원/모드 호환성) 체크
	    - 장치별 “금지 모드” 타임윈도(예: 세탁 진행 중 전원 off 금지)
	- [ ]  로깅/모니터링
	    - `logger:`에서 통합 도메인 DEBUG 임시 활성화 → 문제 해결 후 INFO로 환원
	    - 이벤트 버스(`state_changed`)를 InfluxDB로 전송해 성공/실패율 가시화
	- [ ]  프록시 환경 점검 (NPM 사용 시)
	    - LG OAuth 리다이렉트 흐름에 프록시가 간섭하지 않는지 확인(HTTPS, WebSocket 패스스루 OK)
	    - 필요 시 LG 로그인 페이지 콜백 URL이 HA가 접근 가능한 FQDN을 사용하도록 설정
- [x] **3. 외부 API (기상청 등)** ← <font color="#ff0000">우현이에게 묻기</font>
	- [x]  REST 센서 정의: 초단기예보/대기질 API → `sensor.*`
	- [x]  자동화 연계:
	    - 미세먼지 나쁨 → 공청기 ON
	    - 강수확률 ≥60% → 창문 닫기 알림/자동화
	- [ ]  호출 제한/에러 처리: 캐시 주기(10–30m) + 실패 시 마지막 정상값 유지
- [ ] **4. 네트워크 인프라**
	- [ ]  ~~VLAN 분리: `HA/DB` ↔ `IoT(ESP/Zigbee)` ↔ `WAN(외부 API)`~~
	- [ ]  ~~방화벽: MQTT(1883/8883) 내부망만, HA 관리 포트 제한, NPM 뒤 TLS 강제~~
	- [ ]  성능 테스트:
	    - ThinQ 엔티티 수 × 폴링 주기 → 분당 호출 수 산출
	    - 목표: 안정적 제어/모니터링(타임아웃/429 없음)


---

## 2. 데이터베이스

- [ ] **1. InfluxDB (시계열 저장·리텐션·다운샘플)**
	- [ ]  **데이터베이스/리텐션**
	    - [x] DB/버킷: `sensors`(원본, 보존 30~90일)
	    - [ ] DB/버킷: `sensors_agg`(집계, 보존 1~2년)
	    - [ ] RP/Task(CQ)로 **1m → 5m → 1h** 다운샘플 정책 적용
	- [ ]  **수집 파이프라인**
	    - [ ] ~~**MQTT → InfluxDB** 라인 구성~~
	    - [ ] 토픽 설계: `care/<room>/<device>/{state,metric}` 등
	- [x]  **측정 설계(Measurement/Tags/Fields)**
	    - 예) `power_usage`(tags: device, room; fields: watts, kwh), `climate`(tags: device, room; fields: temperature, humidity)
	    - [x] 센서 식별자 매핑 테이블 정리(HA 엔티티 ↔ 측정/태그) — InfluxDB.md 센서 리스트 기준
	- [ ]  **다운샘플/집계**
	    - [ ] 지속 쿼리/Task: `mean/median/max/min/diff` 집계 생성(5m, 1h)
	    - [ ] 간헐/이상값 제거 로직(미터 점프, 0→큰값 스파이크) 포함
	- [ ]  **보안·운영**
	    - [ ] 내부망/프록시 보호, 관리자/읽기전용 사용자 분리
	    - [ ] retention 만료/Shard 용량 모니터링, 쓰기 오류/지연 알림
- [ ] **2. MySQL (설정·스키마·운영)**
	- [ ]  **프로비저닝**
	    - [x] 인스턴스/컨테이너 생성, 타임존 `Asia/Seoul`, 문자셋/콜레이션 `utf8mb4/utf8mb4_general_ci`
	    - [ ] 운영/개발 분리 DB, 최소권한 계정 분리(애플리케이션·마이그레이션·백업)
	- [ ]  **스키마 설계 & 마이그레이션**
	    - [x] 테이블: `users`, `profiles`, `devices`, `device_bindings`, `automations`, `automation_runs`, `oauth_identities`, `roles`, `user_roles` 등
	    - [x] PK/FK/유니크 제약 설계, 인덱스(이메일, 장치ID, 실행시각) 최적화
	    - [ ] 마이그레이션 스크립트(v1) 작성 및 적용(트랜잭션, 리트라이, 롤백)
	- [ ]  **애플리케이션 연동**
	    - [ ] **SSO 싱크**: Authentik Post-login Webhook → FastAPI 사이드카 → `users/oauth_identities` **UPSERT** 파이프라인
	- [ ]  **성능·신뢰성**
	    - [ ] 트랜잭션 격리, 커넥션 풀 파라미터(최대 연결, 타임아웃) 설정
	    - [ ] Slow Query 로그/지표 수집, 문제 쿼리 인덱싱
	- [ ]  **보안**
	    - [ ] 디스크 **LUKS** 암호화, 테이블 컬럼(토큰/비밀) **AES** 암호화 저장
	    - [ ] 내부망만 수신, 방화벽/IP allowlist, 최소권한 계정/권한
	- [ ]  **운영 점검**
	    - [ ] 백업/복구 리허설(정기)
	    - [ ] 스키마 변경 시 다운타임/락 대비 계획 수립
- [ ] **3. Grafana (가시화·알림)**
	- [x]  **데이터 소스 등록**
	    - [x] InfluxDB(원본/집계)
	- [x]  **대시보드**: 항목별로 대시보드 나누기
	    - [x] 에너지(스마트 플러그/전력)
	    - [x] 환경(온습도·공기질)
	    - [x] 장치가용성(엔티티 상태)
	    - [x] 네트워크(라우터·인터넷 속도)
	    - [x] 보호자용 패널(응급알림/낙상 이벤트/대기질) — HA 캡처와 일치 검증
	- [ ]  **알림**
	    - 전력 급증, 장시간 오프라인, 낙상 이벤트 카운트 이상 시 알림
	    - 연락 수단: 모바일앱/Email/FCM Webhook 연동
- [ ] **4. 백업/DR (자동화·복구검증)**
	- [ ]  **백업 전략**
	    - [ ] MySQL: 일/주 단위 **mysqldump + 압축 + 암호화**, 바이너리 로그 옵션 검토
	    - [ ] InfluxDB: 스냅샷/Export Task, 메타데이터 포함
	- [ ]  **전송/보관**
	    - [ ] **Google Drive API + Apps Script**로 업로드, 보관주기·버전 관리
	    - [ ] 암호화(대칭키) 및 키 보관(secrets 관리)
	- [ ]  **복구 리허설**
	    - [ ] 주 1회 자동 복구 테스트(샌드박스 DB), 무결성/조회 검증
	    - [ ] 백업 실패/불일치 알림
- [ ] **5. 네이밍·거버넌스·모니터링**
	-  **네이밍 규칙**
	    - Measurement: `domain_metric` (예: `climate_temp`, `power_usage`)
	    - Tags: `site`,`room`,`device`,`vendor`
	    - Fields: 소문자·스네이크케이스, SI 단위 일관화(°C, %RH, W, kWh)
	-  **데이터 품질**
	    - 누락/이상 감지, 단위 변환(예: W↔kW), 타임스탬프 표준화(UTC 저장/로컬 표시)
	- [ ]  **모니터링**
	    - [ ] 쿼리 지연, 쓰기 실패율, 시계열 유입량, 디스크 사용량
### 적용·예시 스니펫

```

#### (v1 기준) 다운샘플 CQ 예시

```sql
-- 1m 원본 → 5m 평균
CREATE CONTINUOUS QUERY cq_power_5m ON sensors
BEGIN
	SELECT mean(watts) AS watts, sum(kwh) AS kwh
	INTO sensors_agg.autogen.power_usage_5m
	FROM sensors.autogen.power_usage
	GROUP BY time(5m), device, room
END;

-- 5m → 1h 집계
CREATE CONTINUOUS QUERY cq_power_1h ON sensors_agg
BEGIN
	SELECT mean(watts) AS watts, sum(kwh) AS kwh
	INTO sensors_agg.autogen.power_usage_1h
	FROM sensors_agg.autogen.power_usage_5m
	GROUP BY time(1h), device, room
END;
```

---

## 3. API Gateway(FastAPI)

- [x] **1. 서비스 스켈레톤/런타임**
	-  프로젝트 구조: `app/main.py`, `app/api/*`, `app/core/*`, `app/models/*`, `app/services/*`
	-  런타임: 개발 `uvicorn[standard]`, 운영 `gunicorn + uvicorn.workers.UvicornWorker`
	-  설정 계층: `pydantic-settings` 기반 `.env` 로드, 환경별 프로파일 분리
	- OpenAPI 문서: `/docs`, `/redoc` (운영 환경에서 인증 필요)
- [ ] **2. 환경변수 & 구성**
	- [x]  기본
	    - [x] `HA_BASE_URL`
	    - [x] `HA_TOKEN`
	    - [x] `MYSQL_DSN`
	    - [x] `INFLUX_URL/ORG/BUCKET/TOKEN`  
	    - [x] `API_KEYS`  
	    - [x] `RATE_LIMIT`
	    - [x] `RATE_WINDOW_SEC`
	    - [x] `ALLOWED_ORIGINS`
	    - [x] `REQUEST_TIMEOUT_S`
	    - [x] `LOG_LEVEL`
	- [ ]  운영 플래그: `RUN_SERVER`, `FORCE_STUB`, `SIMULATE_NO_SSL`
	- [x]  시크릿은 OS Secret/HA Secrets로 분리 관리
- [ ] **3. 인증·인가·보안**
	- [ ]  인증: JWT(HS256) 또는 API Key 헤더(`Authorization: Bearer`, `x-api-key`)
	- [ ]  인가: `role/scope`(admin/user) 클레임 검사
	- [ ]  CORS: `ALLOWED_ORIGINS` 기반 허용
	- [ ]  속도제한: 토큰버킷(키별), 429 응답 포맷 고정
	- [ ]  프록시/NPM 뒤 신뢰헤더: `X-Forwarded-Proto/For/Host` 처리, HTTPS 강제
	- [ ]  요청 추적: `X-Request-ID` 수용/발급
- [ ] **4. 핵심 엔드포인트**
	- [ ] **4.1 Home Assistant 프록시**
		- `GET /ha/states` : 엔티티 상태 조회(필터: `domain`, `entity_id`)
		- `POST /ha/services/{domain}/{service}` : 서비스 호출(바디: `entity_id`, `data`)
		-  타임아웃·재시도·에러 매핑(HA 4xx/5xx → 표준 에러)
	- [ ] ~~**4.2 SSO 동기화(Webhook)**~~
		-  ~~`POST /sso/webhook` : Authentik Post-login 페이로드 수신~~  
		    - ~~처리: MySQL **UPSERT**(users, oauth_identities), 기본 롤 매핑~~  
		    - ~~보안: `X-Auth-Token` 공유 시크릿, 소스 IP 제한~~
	- [ ] **4.3 자동화·장치 메타**
		-  `GET /devices` : 등록 장치/바인딩 목록(캐시)
		-  `POST /automations` : 규칙 생성(Trigger/Condition/Action)
		-  `GET /automations/{id}/runs` : 실행 이력
	- [x] **4.4 이벤트 수집·알림**
		-  `POST /events/fall` : (예) mmWave 추론 결과 수신 → FCM 푸시, 중복 억제 윈도
		-  `POST /notify` : 보호자 공지/경보 발송(앱/이메일/FCM)
	- [ ] **4.5 시계열/분석**
		-  `GET /metrics/energy` : Influx 집계(1h/24h/7d) 조회
		-  `POST /metrics/ingest`(옵션) : 외부 파이프라인 유입
- [ ] **5. 데이터 계층 연동**
	-  ~~MySQL: SQLAlchemy/SQLModel, 커넥션 풀/트랜잭션 전략~~
	-  InfluxDB: 다운샘플 버킷 우선 조회, 타임아웃/리트라이 래퍼
	-  캐시: `lru_cache` 또는 `aiocache`(엔드포인트별 TTL)
- [ ] **6. 로깅·모니터링**
	-  구조화 로그(JSON): `ts, level, logger, msg, path, method, status, latency_ms, request_id, user_id`
	-  감사로그: 가전 제어/권한 변경 등 민감 액션 별도 채널
	-  지표: 요청수/지연/에러율, 외부호출(HA/DB) 지연, 레이트리밋 드랍 건수
	-  에러 표준 응답: `{code, message, details, request_id}`
- [ ] **7. 오류처리·신뢰성**
	-  네트워크 오류: 지수백오프(최대 3회), 회로차단기(옵션)
	-  멱등성: 제어형 API에 `Idempotency-Key` 지원
	-  입력검증: `pydantic` 스키마(필수 필드/범위/enum)
- [ ] **8. 배포·런북**
	- [ ]  컨테이너: 멀티스테이지 `Dockerfile`(슬림 이미지)
	- [ ]  프로세스: `systemd`/Compose, **재시작 정책** 설정
	- [ ]  프록시(NPM): 경로/도메인 라우팅, **WebSockets 패스스루**(HA 필요)
	- [ ]  비상 절차: 토큰 유출·레이트리밋 급증·DB 연결 고갈 대응
- [ ] **9. 테스트·품질**
	- [ ]  단위/통합: 라우트·서비스·리포지토리, 외부 호출 mock
	- [ ]  계약: HA/SSO Webhook 페이로드 스냅샷 테스트
	- [ ]  부하: 목표 RPS, p95 지연, 레이트리밋/백오프 시나리오
	- [ ]  보안: JWT 위조·재사용, 헤더 주입, CORS, IDOR 점검

---

## 4. SSO (Authentik + OIDC)

- [x] Nginx Proxy Manager(NPM) / TLS
	- [x] [HA, Authentik에 각각 프록시 호스트 생성](obsidian://open?vault=memo&file=temp%2F%ED%94%84%EB%A1%9D%EC%8B%9C%20%ED%98%B8%EC%8A%A4%ED%8A%B8%20%EC%83%9D%EC%84%B1)
	- [x] [NPM에서 HA/Authentik 모두 **HTTPS**(LE 인증서) + WebSockets ON](obsidian://open?vault=memo&file=temp%2FNPM%20configuration)
	- [x] **Let’s Encrypt** 활성화.
	- [x] HA는 **WebSocket** 필요 → NPM에서 “Websockets 지원” 체크
	- [x] HA `trusted_proxies`/`use_x_forwarded_for` 적용
	- [x] `configuration.yaml` 설정
- [ ] ~~Authentik 설정~~
	- [ ] ~~소셜 IdP 연결~~
		- [x] **Google**: `openid profile email`(+생일은 별도 동의/People API 필요)
		- [ ] ~~**Naver**: 이메일/이름, `birthday`(MM-DD), `birthyear` 제공 동의 항목 가능~~
		- [ ] ~~**Kakao**: `kakao_account.email/name/birthday/birthyear` 등 동의 항목 설정~~
		- [x] Authentik OIDC 클라이언트: **Redirect URI 정확**(`…/auth/oidc/callback`)
	- [ ] ~~[Post-login Webhook](obsidian://open?vault=memo&file=temp%2Fpost-login%20webhook)~~
		- [ ] ~~트리거: 로그인(또는 첫 로그인) 성공 시~~
		- [ ] ~~페이로드(예시): `{sub, email, name, birthdate, provider, groups}`~~
		- [ ] ~~전송처: 사이드카 `https://sync.example.com/sso-hook`~~
		- [ ] ~~사이드카 Webhook **공유 시크릿**/방화벽 제한~~
		- [ ] ~~HA **Owner** 1회 수동 생성 후 운영~~
		- [ ] ~~인증: 헤더에 `X-Auth-Token: <shared-secret>`~~
- [ ] ~~Home Assistant(OIDC 프로바이더)~~
	- [x] ~~HACS로 **OIDC 인증 플러그인** 설치~~
	- [ ] ~~`configuration.yaml` 설정~~
- [ ] ~~MySQL~~
	- [ ] ~~FastAPI 사이드카~~
	- [ ] ~~Authentik Webhook이 보내는 JSON을 받아 **UPSERT**~~


---

## 5. AI 모듈

-  **음성 인터페이스 허브**
    - Whisper + librosa/scipy 기반 음성 인식
    - VITS 기반 음성 합성, 보호자 음성 복제(TTS)
    - ESP32-S3-Korvo → AES 암호화 후 Python 서버로 전송
-  **낙상 감지**
    - 24GHz mmWave 레이더 + TensorFlow LSTM 모델
    - HOG 기반 특징 추출, FastAPI 통해 FCM 푸시 알림
    - 노이즈 필터링 및 이상값 제거 로직 추가

---

## 6. 자동화 및 대시보드

### Home Assistant YAML + Node-RED
- 공통 원칙
	-  네이밍 규칙: `auto.<도메인>.<목적>.<조건>` (예: `auto.climate.cooling.pm25_high`)
	-  모드: `single`(기본) / 충돌 가능 시 `restart`
	-  실행로그: 모든 자동화 시작/종료/결과를 **InfluxDB 시계열**로 적재(실행 히스토리 요건)
	-  정의 원천: YAML → 내부 파서로 **MySQL 메타 저장**(룰 현황/감사 목적)
- [ ] **1. 에너지/전력 자동화**
	- [ ]  냉·난방기 에너지 보호: 에어컨 전력 급증 시(예: `sensor.seutaendeuhyeong_eeokeon_power`) → 알림/세이프가드 적용
	- [ ]  주방 후드 자동화: `sensor.zigbee_dimmer_power` 상승 지속(요리 감지) → 후드 ON, 하강 지속 → OFF
	- [ ]  총 사용량 경보: `sensor.total_power_consumption` 급증·야간 이상 사용 시 알림
	- [ ]  PC/TV 사용 최적화: `switch.desktop_power`/`sensor.deseukeutab_jeonweon_power` 기준 유휴 전력 차단 알림
- [ ] **2. 환경(공기질/날씨) 자동화**
	- [ ]  실내 공기질 경보: `sensor.eeomoniteo_peulreoseu_pm2_5 / pm10 / carbon_dioxide` 임계 초과 → 알림/환기 유도(창문 알림 또는 후드 온)
	- [ ]  외부 미세먼지 나쁨 시 환기 금지: `sensor.wn_jib_pm10 / pm2_5` 등급 기반 안내(내부 공기질과 교차 판단)
	- [ ]  강수/뇌우 예보 대비: `precip_*`/`thunderstorm_probability_*` 높음 → 세탁/외출 알림(일정 연동 시)
- [ ] **3. 존재감지/생활 패턴**
	- [ ]  재실 기반 조명/냉난방: `binary_sensor.someone_home` 상태 전이 → 조명/온도 프리셋 적용
	- [ ]  배터리 관리: `sensor.average_device_battery` 저전력 임계치 도달 시 충전 알림
	- [ ]  엔티티 장애 대응: `sensor.unavailable_entities` 증가 시 점검 알림/자동 재시도 플로우
- [ ] **4. 네트워크/인터넷 상태**
	- [ ]  인터넷 품질 저하 알림: `sensor.fast_com_download` 저하·지터 상승 시 라우터 재부팅 제안(버튼 노출)
	- [ ]  라우터 상태 기반 조치: `sensor.192_168_1_1_devices_connected` 급증/이상 → 보안 알림, 필요 시 `button.rt_ac68u_*` 가이드

### 대시보드 (Grafana + HA Lovelace)
- **1. 데이터 소스 & 구조**
	-  Grafana 데이터 소스: InfluxDB(원본/집계), MySQL(메타/자동화)
	-  대시보드 카테고리: **에너지 / 환경 / 안전(낙상·경보) / 네트워크 / 시스템 가용성**
	-  대시보드 제작 항목은 개발 일정에도 명시되어 있음(“Grafana 데이터 시각화”)
- [ ] **2. 에너지 패널**
	- [ ]  전체 전력: `sensor.total_power_consumption`(실시간·1h·24h) + 장치별 분해(에어컨/후드/PC)
	- [ ]  절감 추이/효율: (에어컨) `energy`/`energy_saved` 라인·누적 비교
- [ ] **3. 환경(공기질/기상) 패널**
	- [ ]  실내 공기질: PM2.5/PM10/CO₂/온습도(에어모니터 플러스 계열) — 임계 구간 색상대역 표시
	- [ ]  외부 대기/예보: PM10/PM2.5·강수·자외선·뇌우확률 등(집 단위 센서) — 환기 추천/금지 배지 표시
- [ ] **4. 안전·알림 패널**
	- [ ]  낙상 이벤트 타임라인/히트맵, 알림 전송 성공률(FCM) — mmWave 기반 도입 이유를 대시 설명에 반영
	- [ ]  장애/미가용: `sensor.unavailable_entities` 추이 + 상위 Top-N 엔티티 목록
- [ ] **5. 네트워크 패널**
	- [ ]  속도/지터: Fast.com/Cloudflare Speed Test 주요 지표(다운/업/지터/90th)
	- [ ]  라우터 상태: 연결 기기 수/업타임/재부팅 이력, AiMesh 노드 가용성
- [ ] **6. HA Lovelace(현장 UI)**
	- [ ]  뷰 구성: **거실/주방/방/네트워크/알림** 탭
	- [ ]  고령자 친화 UI: 큰 글씨·고대비·필수 카드만(장치 타일, 그래프, 알림 버튼)
	- [ ]  “문제 발생” 배너: `unavailable_entities` > 임계 시 상단 경고 영역 표출
- [ ] **7. 유지보수**
	- [ ]  불필요 센서 패널 제거(문서에서 취소선 센서들) — 패널 속도/가독성 개선
	- [ ]  패널 변수: `room/device` 변수화로 재사용성 확보
	- [ ]  경보 튜닝: 임계/지연/허용오차 주기적 보정

---

## 7. 보안

- [ ]  네트워크 분리 (VLAN)
- [ ]  ~~MQTT mTLS 적용~~
- [x]  외부 API는 HTTPS/OAuth2
- [ ]  DB 암호화 (LUKS, AES)
- [ ]  방화벽: 내부망 전용, 외부 접근 제한
- [ ]  OTA 업데이트 시 암호화 통신 경로 적용

---

## 8. 기타

- [x]  라즈베리파이 외부 접속 (포트포워딩)
- [ ]  UPS 무정전 장치로 안정성 확보
- [ ]  고령자 맞춤 UX/UI (큰 글씨, 고대비, 음성 중심)
- [ ]  단계별 온보딩 + 튜토리얼 제공
- [ ]  요양원/재택 케어 시설 확장성 검토