/* --- Mobile drawer for #sidebar (Hydeout + variables.scss) --- */
@use "variables" as *;

/* ====== SCSS 설정값: variables.scss 값이 있으면 우선 사용 ====== */
$drawer-width: 300px !default;
$drawer-overlay: rgba(0, 0, 0, .45) !default;
$drawer-z: 1000 !default;
$overlay-z: 900 !default;

/* 테마 색/반경 추정 변수: 없으면 기본값으로 폴백 */
$drawer-bg: if(variable-exists(body-bg), $body-bg, #fff) !default;
$drawer-fg: if(variable-exists(body-color), $body-color, #111) !default;
$drawer-radius: if(variable-exists(border-radius), $border-radius, .5rem) !default;
$drawer-shadow: 2px 0 24px rgba(0, 0, 0, .18) !default;

/* CSS Custom Props도 노출 (다른 CSS에서 var()로 활용 가능) */
:root {
  --drawer-width: #{$drawer-width};
  --drawer-overlay: #{$drawer-overlay};
  --drawer-z: #{$drawer-z};
  --overlay-z: #{$overlay-z};
  --drawer-bg: #{$drawer-bg};
  --drawer-fg: #{$drawer-fg};
  --drawer-radius: #{$drawer-radius};
  --drawer-shadow: #{$drawer-shadow};
}

@media (max-width: 1024px) {
  /* 햄버거 버튼(고정) */
  .drawer-hamburger {
    position: fixed;
    top: .75rem;
    left: .75rem;
    z-index: var(--drawer-z);
    border: 0;
    background: rgba(255, 255, 255, .9);
    padding: .5rem;
    border-radius: var(--drawer-radius);
    box-shadow: 0 2px 10px rgba(0, 0, 0, .12);
    cursor: pointer;
    color: var(--drawer-fg);

    svg {
      display: block;
      width: 24px;
      height: 24px;
    }
  }

  /* 기존 #sidebar를 오프캔버스로 전환 */
  #sidebar {
    position: fixed !important;
    top: 0;
    left: 0;
    bottom: 0;
    width: var(--drawer-width);
    max-width: 86vw;
    background: var(--drawer-bg);
    color: var(--drawer-fg);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    transform: translateX(-100%);
    transition: transform .25s ease;
    z-index: var(--drawer-z);
    box-shadow: var(--drawer-shadow);
  }

  body {
    &.drawer-open {
      overflow: hidden;

      #sidebar {
        transform: translateX(0);
      }
    }
  }

  /* 오버레이 */
  .drawer-overlay {
    position: fixed;
    inset: 0;
    background: var(--drawer-overlay);
    z-index: var(--overlay-z);
  }

  /* 본문이 상단 버튼과 겹치지 않게 여백 (상단바가 없다면 선택) */
  main.container {
    padding-top: 3.25rem;
  }
}

/* 모션 최소화 사용자 설정 대응(선택) */
@media (prefers-reduced-motion: reduce) {
  #sidebar { transition: none; }
}
